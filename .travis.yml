language: node_js
node_js:
- 12
env:
- CODECOV_TOKEN=062e67b2-5aec-4fab-8455-d9819e510457
cache:
  directories:
  - node_modules
services:
- postgresql
before_script:
- npm install
- psql -c 'create database bbtest;' -U postgres
script:
- npm run test
- npm run report-test
deploy:
  provider: heroku
  api_key:
    secure: kNmkINpFFV1S2qheAD61lfnECHNZm8JGmmCbHwp02N6WC/Bo1oBFzRHgxkAolGQiw0Gv8usQyF3oGG0s2uN79dpis7N/HRBpINWbspa+43LX/0azirnZjz5AbGQsITyAP5IpMfreBSfhaUUFDB87ZuWN8sJdP/nWOHI3TMyi3/pAo6mnW+4u1B0L2lZlM4w948voM44zdhz4Pi7Zx3gaysa4+LVdipeQL8tcKrpQvFdLlKJ4nljSdoqUY5DhhNAFuy4qhV7W2faQ+5VQzqgNLemVQ/afGOYcnEtOSs8VQ7NJTW6IgzwpDjlOOEM0yRSukGJdp9I/f7p5fI3kajM3XRepyyedCV87nSy6QtWMdsLbexBhxnEqXB8y9Md41wdNX8XuDnJ1XL1uuHWHVs9NNHF2z2dMS6qlvH83OFD5evmAG47Tqmf3O4adHLKnnzkyZ2TMsKg/x1nMzkJicw/oIw19T4SBvrxiN9T+TxhIZdlnGNbtae97OtnpFJUeFMv+1te+2o42hS+lIXaBaf7f2kf2c5E4Rzp5DYeOJaRlZqcCA3V4VS3AeOHVsQDTeSxeuY/pCwNGewFDQQDGfNomxXtXbr767iME+zpxdXb0eW0UzwQN9ei/O/AAtt1OPMH0YTAtef1RLisVAzCA5DOhYY1yluPrVUxOEwVyxVCIE9s=
  app: apibechdel
  on:
    repo: fac19/Bechdel-Beyond-backend
  skip_cleanup: 'true'
