language: node_js
node_js:
- 12
env:
- CODECOV_TOKEN=062e67b2-5aec-4fab-8455-d9819e510457
cache:
  directories:
  - node_modules
services:
- postgresql
before_script:
- npm install
- psql -c 'create database bbtest;' -U postgres
script:
- npm run test
- npm run report-test
deploy:
  provider: heroku
  api_key:
    secure: BedwNMNmDpYRXnHuPYB1MyUkgzkY2BelGDy8viqMWlVMdJ+tWOVNYmQ1kBEHq+DwcKhi8tBbmjmMgBqc+oZiItGo3N0HFI4anX/048dyLJjdUIfVA0FIsxcrXTRjTuptVQmXIaxbuYhX7npw3k35ZkF5Lwg+gR40i70L5Z6/wQPrtuH8YK91RFxKBxqJ75TRsPckipOcGjEGGHzaDNqlNYRenAHCDsmXx327M4h/GeKy1VHj1uwBWdNfpS9oZChVSHM5AG0N587wjp3RocKEETNz8uLsjX/BjpL+hznj56RahWnieelOEU8voGGF1C9i+wDHBuaXAejKXUgi+23VyKpFmWk3odfDl6J0tRGZVRNKG+Yu3kpiQOhMg7pnCZFvJMdmwS3fsCh4oNy8jsopnMZzdHYl6oNOGLSF+CtZumuTMdlyrdrv8FigMUhlwiF0Txp2xDvHFAMLBx3ZFh+MPLTJXhdy1ERHrRU86hqaagL7OyaEs+wSB2tkTEqh9m0tRFKy7EYtAI7DeWxzJjg6zQFitITgXoZF60VbOWC+X2JVqj8+b0KmYQlR1iCRrPKw8o8Wns10I5jUkKR9iYK9fgxJcMu1Cpnim+Kfp8oPrjmMRR3LlV87kXdsY6i8SLngisnjPU5ZCHKy2S/UDYvCuj+Ga7JI4KrB6o3+/xNvjFw=
  app: apibechdel
  on:
    repo: fac19/Bechdel-Beyond-backend
  skip_cleanup: 'true'
